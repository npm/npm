#!/bin/bash

# set configurations that will be "sticky" on this system,
# surviving npm self-updates.
:: Created by npm, please don't edit manually.
@ECHO OFF

SETLOCAL

SET "NODE_EXE=%~dp0\node.exe"
IF NOT EXIST "%NODE_EXE%" (
  SET "NODE_EXE=node"
)

SET "NPM_CLI_JS=%~dp0\node_modules\npm\bin\npm-cli.js"
FOR /F "delims=" %%F IN ('CALL "%NODE_EXE%" "%NPM_CLI_JS%" prefix -g') DO (
  SET "NPM_PREFIX_NPM_CLI_JS=%%F\node_modules\npm\bin\npm-cli.js"
)
IF EXIST "%NPM_PREFIX_NPM_CLI_JS%" (
  SET "NPM_CLI_JS=%NPM_PREFIX_NPM_CLI_JS%"
)

"%NODE_EXE%" "%NPM_CLI_JS%" %*
CONFIGS=()
i=0

# get the location of this file.
unset CDPATH
CONFFILE=$(cd $(dirname "$0"); pwd -P)/npmrc

while [ $# -gt 0 ]; do
  conf="$1"
  case $conf in
    --help)
      echo "./configure --param=value ..."
      exit 0
      ;;
    --*)
      CONFIGS[$i]="${conf:2}"
      ;;
    *)
      CONFIGS[$i]="$conf"
      ;;
  esac
  let i++
  shift
done

for c in "${CONFIGS[@]}"; do
  echo "$c" >> "$CONFFILE"
done
